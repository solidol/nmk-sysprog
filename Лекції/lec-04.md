# Оператори та операції

[Перелік лекцій](README.md)

## Операції

Для здійснення маніпуляцій з даними мова C++ застосовує широкий набір операцій (див. табл. 3.4), що виконують форму­вання і, відповідно, подальше обчислення виразів. Вирази міс­тять **одну** або **декілька** операцій, об’єкти яких називають опе­рандами. Операції являють собою деяку дію, що виконується над **одним** (**унарна**) або **декількома** (**бінарна, триарна**) операн­дами , і мають позначення (наприклад, операція перевір­ки на рівність — позначення «==», операція обчислення за­лишку від ділення цілих чисел — позначення «%» тощо).

Операції поділяються на:

* **унарні** або **одномісні** — **&, *, -, +, ~, !, ++, –****-, sizeof****;**
* **бінарні** або **двомісні** — **+, -,** ***, /, %,** **<<, >>, &, :, ^, <, >, <=, ==, >=, !=, &&,  | |, =,*****=,** **/=, %=, +=, -=, <<=, >>=, &=, |=, ^=****, ., ->, ,,** **(), [];**
* умовну **триарну** або **тримісну** операцію — **?:** **.**

Таблиця 3.4

**Основні операції мови** **C++**

| **Приорітет** | **Оператор** | **Опис** | **Напрям виконання (асоціативність)** |
| --------------------------------------------------------------- | --- | --- | --- |
| 1 | :: | Scope resolution | Л → П |
| 2 | a++ a-- | Suffix/postfix increment and decrement  | Л → П |
| 2 | type() type{}| Functional cast  | Л → П |
| 2 | a()| Function call  | Л → П |
| 2 | a[]| Subscript | Л → П |
| 2 | . -&gt;| Member access  | Л → П |
| 3 | ++a --a | Prefix increment and decrement |  П ← Л |
| 3 | +a -a | Unary plus and minus |  П ← Л |
| 3 | ! ~ | Logical NOT and bitwise NOT|  П ← Л |
| 3 | (type) | C-style cast |  П ← Л |
| 3 | *a | Indirection (dereference) |  П ← Л |
| 3 | &amp;a | Address-of |  П ← Л |
| 3 | sizeof | Size-of[note 1] |  П ← Л |
| 3 | co_await | await-expression (C++20) |  П ← Л |
| 3 | new new[] | Dynamic memory allocation |  П ← Л |
| 3 | delete delete[] | Dynamic memory deallocation |  П ← Л |
| 4 | .* -&gt;* | Pointer-to-member | Л → П |
| 5 | a*b a/b a%b | Multiplication, division, and remainder  | Л → П |
| 6 | a+b a-b | Addition and subtraction | Л → П |
| 8 | &lt;=&gt; | Three-way comparison operator (since C++20)  | Л → П |
| 9 | &lt; &lt;= &gt; &gt;= | For relational operators &lt; and ≤ and &gt; and ≥ respectively  | Л → П |
| 10 | == != | For equality operators = and ≠ respectively  | Л → П |
| 11 | a&amp;b | Bitwise AND  | Л → П |
| 12 | ^ | Bitwise XOR (exclusive or)  | Л → П |
| 13 | \| | Bitwise OR (inclusive or)  | Л → П |
| 14 | &amp;&amp; | Logical AND  | Л → П |
| 15 | \|\| | Logical OR  | Л → П |
| 16 | a?b:c | Ternary conditional[note 2] |  П ← Л |
| 16 | throw | throw operator  |  П ← Л |
| 16 | co_yield | yield-expression (C++20)  |  П ← Л |
| 16 | = | Direct assignment (provided by default for C++ classes)  |  П ← Л |
| 16 | += -= | Compound assignment by sum and difference  |  П ← Л |
| 16 | *= /= %= | Compound assignment by product, quotient, and remainder  |  П ← Л |
| 16 | &lt;&lt;= &gt;&gt;= | Compound assignment by bitwise left shift and right shift  |  П ← Л |
| 16 | &amp;= ^= \|= | Compound assignment by bitwise AND, XOR, and OR  |  П ← Л |
| 17 | , | Comma | Л → П |


Порядок застосування операції визначається **пріоритетом операції** (яка операція виконується раніше, а яка пізніше) та **асоціативністю** (виконується зліва направо або справа на ліво). У першу чергу реалізуються операції з найвищим пріо­ритетом.



### Арифметичні операції:

- **+** — додає величину **П** до **Л**; 
- **–**— віднімає **П** із **Л**; 
- **–** — унарна операція зміни знака величини **П**; 
- **\*** — множення **П** і **Л**; 
- **/** — ділення **Л** на **П**; 
- **%** — залишок від ділення величини **Л** на величину **П** (для цілих чисел), наприклад, якщо **int g = 12;**, то операція - **g = g % 9;** надасть результат: **g = 3;** 
- **++** — унарна операція інкремент. Якщо змінна розташовується праворуч від знака операції (префіксна форма), то значення збільшується на 1 до використання. Якщо ж змін­на знаходиться ліворуч від знака операції (постфіксна форма), то її значення збільшується на 1 після використання, наприклад:

```cpp
int d;
++d; // — префіксний інкремент,
d++; // — постфіксний інкремент;
```

 - **--** унарна операція декремент аналогічно інкременту має двi форми: префіксную (змінна розташована праворуч від знака операцii) — зменшення значення змінної на 1 відбувається до її використання; постфіксну (змінна знаходиться ліворуч від знака операції) — зменшення значення змінної на 1 після її використання.

### Операції присвоювання:
- **=** — присвоювання значення **П** змінній **Л**; 
- **+=** — додає величину **П** до змінної **Л**; 
- **–=** — віднімає величину **П** від змінної **Л**; 
- **\*=** — множення змінної **Л** на величину **П**; 
- **/=** — ділення **Л** на **П**; 
- **%=** — видає залишок від ділення **Л** на **П**.

Просте присвоювання здійснює операція «=». Допускається одночасне зчіплювання декількох операцій присвоювання за умови, що всі операнди мають однаковий тип, наприклад:

```cpp
int і, j, с;
i **= j = с =** **0; .**
```

Операції **+=**, **-=**, **\*=**, **/=** виконують складні присвоювання і дозволяють записувати вирази коротше, наприклад:

```cpp
**s** **+= 7; ** //s=s + 7;
 **і *= j** **+ 5;** //i=i*(j +5);
g%=9; //g=g%9;.
```

### Операції відношення
Операції порівнюють значення **Л** зі значенням **П**: 
- **<** — менше; 
- **<=** — менше або дорівнює (не перевищує); 
- **==** — дорівнює; 
- **\>** — більше; 
- **\>=** — більше або дорівнює (не менше); 
- **!=** — не дорівнює.

У мові C++ «істина» — це ненульова величина, «неправ­да» — це нуль **(0)**. У більшості випадків одиниця **(1)** викориc­товується як ненульове значення.

Операції відношення повертають ціле значення 1, якщо умова вірна, або 0, якщо умова помилкова.

### Логічні операції
оперують з цілими розмірами або з розміра­ми, які можна перетворити на цілі. Обчислення зупиняється, які тільки визначиться, чи є вираз правдивим («істина») або помил­ковим («неправда»). При цьому, як і для операцій відношення, значенням «істина» відповідає 1, а значенням «неправда» — 0.

- **&&** — логічне **«AND»** (кон’юнкція); 
- **\|\|** — логічне **«OR»** (диз’юнкція); 
- **!=** — логічне **«NOT»** (заперечення).

Результат операції «&&» є «істина» **(1)**, якщо обидва її oпe­ранди правдиві (не рівні 0). Результат операції « | |» — «істина» **(1)**, якщо хоча б один з її операндів є «істина». Логічне заперечення «!=» перетворює свій операнд на «істину» **(1)**, якщо він дорівнює **0**, і на «неправду» **(0)**, якщо він не дорівнює **0**.

З використанням логічних операцій та операцій відношення записуються різні умовні вирази, наприклад, умова **3 < х < 5** ма­тиме вигляд: **х > 3 && х < 5**.

### Операції обробки окремих бітів
застосовують для обробки даних як послідовностей бітів (розрядів), кожний з яких набуває значення **0** або **1**.

- **&** — операція бітового множення (кон’юнкція); 
- **\|** — операція бітового додавання (диз’юнкція); 
- **^** — додавання за модулем 2; 
- **~** — інвертування; 
- **\>\>** — зсув праворуч; 
- **<<** — зсув ліворуч.

### Змінна-покажчик
зберігає значення, що є адресою об’єкта в пам’яті комп’ютера. Через покажчик можна звертатися до об’єкта.

### Операції з адресами та покажчиками:

- **&** — одержання адреси: видає адресу змінної, ім’я якої роз­ташоване праворуч від позначення операції; 
- **\*** — непряма адресація (розіменування): видає значення, записане за адресою, на яку посилається покажчик. 

### Додаткові операції:

- **sizeof()** — знаходить розмір (у байтах) операнда, розташова­ного праворуч від назви операції; 
- **(type)** — операція приведення типу перетворює наступне за нею значення в тип, визначений ключовим словом, укладеним у круглі дужки, наприклад: 

```cpp
i = i+(int)*3.14; 
```

### ?: — **триарна** 

Тернарна (тринарна - з трьома операндами) операція, що має вигляд:

```cpp
вираз1? вираз2 : виразЗ;,
```

тут, якщо результат обчислення першого операнда **(вираз1)** не дорівнює **0** («істина»), то результатом операції буде значення дру­гого операнда **(вираз2)**, інакше — третього операнда **(виразЗ)**. Наприклад, знаходження найбільшої з двох величин **а** і **b**, мож­ливо здійснити операцією: **max = (b > а)? b** **: а;**.

## Вирази
Вираз являє собою об'єднання операцій і операндів. Нагадаємо, що операндом називається те, над чим виконується операція. Найпростіший вираз складається з одного операнда. Спираючись на це поняття виразу, ми можемо будувати більш складні конструкції. Наведемо кілька виразів:

```cpp
100;
1904+100;
a*(c-d);
x=0;
x=y++;
x>3;
```

Виразами називаються компоненти програми, складені з використанням операцій, литералов, констант, змінних (включаючи масиви, структури та об'єднання) і викликів функцій. Порядок обчислення виразів визначено лише вимогами відповідності семантиці операторів і дотримання правил пріоритету і порядку виконання операцій. При виконанні цих вимог компілятор вільний у виборі порядку обчислення виразу, навіть якщо обчислення підвиражень може призвести до побічних ефектів.

На відміну від більшості інших мов, в мові Сі для завдання певного порядку обчислення виразу недостатньо тільки відповідної розстановки дужок, так як компілятор може довільно змінювати порядок вираження, що включають асоціативні і комутативні оператори (*, +, |, ^) навіть при наявності дужок. Для завдання бажаного порядку виконання виразу потрібно використовувати додаткові привласнення, якщо потрібно, з використанням тимчасових змінних.

Необхідно з обережністю використовувати вирази, при обчисленні яких можливі побічні результати, так як результати обчислення таких виразів часто проявляються не відразу і, крім того, залежать від використовуваного компілятора. Наприклад, в результаті обчислення операторів присвоювання

```cpp
j=3;
i=(k=j+1)+(j=5);
```

значення змінної i дорівнюватиме 9 або 11 в залежності від того, який підвираз другої операції буде обчислено першим. Таким чином, з використанням різних компіляторів можна отримати різні результати.

### Найпрстіші вирази
Найпростішими виразами називаються вирази, сформовані з використанням констант типів int, char і enum, операції sizeof, унарних операторів - і ~, бінарних операторів + * /% & | ^ << >> = =! = <> <=> =  і тернарної операції?:.

Найпростіші вирази використовуються в операторі switch, в ініціалізаторах кордонів масивів і в операторі препроцесора #if.

