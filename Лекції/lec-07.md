# Введення та виведення даних ч.1

[Перелік лекцій](README.md)

## Потокове введення-виведення

У мові C++ дії, що пов'язані з операціями введення і виве­дення, виконуються за допомогою функцій бібліотек. Функції ведення і виведення бібліотек мови дозволяють читати дані з файлів та пристроїв і писати дані у файли і на пристрої.

Бібліотека мови C++ підтримує три рівня введення-виведення даних:

*   введення-виведення потоку;
*   введення-виведення нижнього рівня;
*   введення-виведення для консолі і порту.

При введенні-виведенні потоку всі дані розглядаються як потік окремих байтів. Для користувача потік — це файл на дис­ку або фізичний пристрій, наприклад, дисплей чи клавіатура, або пристрій для друку, з якого чи на який направляється потік даних. Операції введення-виведення для потоку дозволяють об­робляти дані різних розмірів і форматів від одиночного символу до великих структур даних. Програміст може використовувати функції бібліотеки, розробляти власні і включати їх у бібліоте­ку. Для доступу до бібліотеки цих класів треба включити в програму відповідні заголовні файли.

За замовчуванням стандартні введення і виведення повідомлень про помилки відносяться до консолі користувача (клавіатури та екрана). Це означає, що завжди, коли програма очікує введення зі стандартного потоку, дані повинні надходити з клавіатури, а якщо програма виводить дані — то на екран.

У мові C++ існує декілька бібліотек, які містять засоби введення-виведення, наприклад:**stdio.h, iostream.h.** Найчастіше застосовують потокове введення-виведення даних, операції яко­го включені до складу класів **istream** або **iostream**. Доступ до бібліотеки цих класів здійснюється за допомогою використання у програмі директиви компілятора **#include <iostream.h>**.

**Для потокового введення даних** вказується операція «**>>**» («читати з»). Це перевантажена операція, визначена для всіх простих типів і покажчика на **char**. Стандартним потоком введення є **cin**.

Формат запису операції введення має вигляд:

```cpp
сin [>> values];
```

де **values** — змінна.

Так, для введення значень змінних **х і у** можна записати:

```cpp
сin >> х >> у;
```

Кожна операція «>>» передбачає введення одного значення. При такому введенні даних необхідно дотримуватись конкретних вимог:

*   для послідовного введення декількох чисел їх слід розділяти символом пропуску (« ») або **Enter** (дані типу **char** роздiляти пропуском необов'язково);
*   якщо послідовно вводиться символ і число (або навпаки), пропуск треба записувати тільки в тому випадку, коли символ (типу **char**) є цифрою;
*   потік введення ігнорує пропуски;
*   для введення великої кількості даних одним оператором їх можна розташовувати в декількох рядках (використовуючи Enter);
*   операція введення з потоку припиняє свою роботу тоді, коли всі включені до нього змінні одержують значення. Наприклад, для операції введення **х і у**, що вказана вище, можна ввести значення **х та у** таким чином:

```cpp
2.345 789 (Enter)
або   
2.345 (Enter)
789 (Enter)
```

Оскільки в цьому прикладі пропуск є роздільником між значеннями, що вводяться, то при введенні рядків, котрі мiстять пропуски у своєму складі, цей оператор не використовується. У такому випадку треба застосовувати функції **getline(), get()** тощо. У мові C++ бажано здійснювати потокові введення-виведення даних.

Для потокового виведення даних необхідна операція **«<<»** («записати в»), що використовується разом з ім'ям вихідного потоку **cout**. Наприклад, вираз

```cpp
cout << х;
```

означає виведення значення змінної **х** (або запис у потік). Ця операція вибирає необхідну функцію перетворення даних у потік байтів.

Формат запису операції виведення представляється як: `cout << data [<< data1];`

де **data, data1** — це змінні, константи, вирази тощо.

Потокова операція виведення може мати вигляд: 

```cpp
cout << "у =” << x + а – sin(x) << "\n";
```

Застосовуючи логічні операції, вирази треба брати в дужки: 

```cpp
cout << "р =" << (а && b || с) << "\n";.
```

Символ переведення на наступний рядок записується як рядкова константа, тобто `"\n"`, інакше він розглядається не як символ керуючої послідовності, а як число 10 (код символу). Таких помилок можна уникнути шляхом присвоювання значення ке­руючих символів змінним, тобто:

```cpp
#define << sp " "
#define << ht "\t"
#define << hl "\n".
```

Тепер операцію виведення можна здійснити так: 

```cpp
cout << "у =" << x + а – sin(x)<< hl;
```

Слід пам'ятати, що при виведенні даних з використанням «cout <<» не виконується автоматичний перехід на наступ­ний рядок, для реалізації такого переходу застосовується так переведення рядка "\n" або операція endl. Тобто, вивести рядкову константу можна, наприклад, так:

```cpp
cout << "О деле суди по исходу \n";
```

```cpp
або   cout << "О деле суди по исходу" << endl;.
```

Приклад. Написати програму, що містить організацію виведення даних, пояснювальні повідомлення, а також символи переведен­ия рядка.

```cpp
#include <iostream>

int main()
{
    // Оголошення та ініціалізація змінних
    char firstName = 'W';       // Перше ім'я
    char middleName = 'P';      // По-батькові
    char lastName = 'S';        // Прізвище
    int age = 20;               // Вік
    int bonus = 2;              // Доплата
    float salary = 309.75;      // Зарплата
    float percent = 8.5;        // Відсоток

    // Виведення ісходних даних
    std::cout << "Перевірка вихідних даних\n";
    std::cout << firstName << middleName << lastName << "\n\n";

    // Виведення додаткової інформації
    std::cout << "Вік \t Доплата \t Зарплата \t Відсоток:\n";
    std::cout << age << "\t" << bonus << "\t" << salary << "\t" << percent << "\n";

    // Затримка перед закриттям вікна (для Windows)
    system("pause");

    return 0; // Кінець програми
}
```

В останніх двох операціях виведеня програми можна використати символи табуляції. Наприклад, **«\t»** поміщає кожне наступне ім'я або число в наступну позицію табуляції (через вісім символів), у цьому випадку маємо:

```cpp
    std::cout << "Вік \t Доплата \t Зарплата \t Відсоток:\n";
    std::cout << age << "\t" << bonus << "\t" << salary << "\t" << percent << "\n";
```

Для додаткового керування даними, що виводяться, використовують маніпулятори **setw(w)** та **setprecision(d)**. Маніпулятор **setw(w)**призначений для зазначення довжини поля, що виділяється для виведення даних (**w** — кількість позицій). Маніпуля­тор **setprecision(d)** визначає кількість позицій у дробовій частині дійсних чисел.

Маніпулятори змінюють вигляд деяких змінних в об'єкті **cout**, що у потоці розташовані за ними. Ці маніпулятори нази­вають прапорцями стану. Коли об'єкт посилає дані на екран, він перевіряє прапорці, щоб довідатися, як виконати завдання, наприклад, запис:

`cout << 456 << 789 << 123;`

призводить до виведення значення у вигляді: **456789123**, що ускладнює визначення групи значень.

Приклад. Написати програму, використовуючи маніпулятор **setw()**.

```cpp
#include <iostream>
#include <iomanip>

int main()
{
    // Виведення чисел без вирівнювання
    std::cout << 456 << 789 << 123 << std::endl;

    // Виведення чисел з використанням setw для вирівнювання
    std::cout << std::setw(5) << 456 << std::setw(5) << 789 << std::setw(5) << 123 << std::endl;

    // Виведення чисел з іншими значеннями ширини
    std::cout << std::setw(7) << 456 << std::setw(7) << 789 << std::setw(7) << 123 << std::endl;

    // Затримка перед закриттям вікна (для Windows)
    system("pause");

    return 0; // Кінець програми
}
```

Результати виконання програми:

```
456789123 
456     789     123 
456       789       123
```

У цьому прикладі з'явився новий заголовний файл **iomanip.h**, що дозволяє застосовувати функції маніпуляторів. При використанні функції **setw()** число вирівнюється вправо в межах заданої ширини поля виведення. Якщо ширина недостатня, то вказане значення ігнорується.

Функція **setprecision(2)** повідомляє про те, що число з пла­ваючою крапкою виводиться з двома знаками після крапки з округленням дробової частини, наприклад, при виконанні операції

**cout << setw(7) << setprecision(2) << 123.456789;**

буде отримано такий результат: **123.46.**

Функції **cout.width(w)** та **cout.precision(d)**, які потребують підключення тільки заголовного файла **iostream.h**, виконують дії, подібні тим, що і функції **setw(w)** та **setprecision(d)**.

Операція введення використовує ті ж самі маніпулятори, що й операція виведення. Список змінних, в які будуть помі­щені дані, визначений у **values**.

**Приклад 4.3.** Написати програму обчислення податку на продаж.

```cpp
#include <iostream>
#include <iomanip>

int main()
{
    float salesAmount;  // salesAmount — сума продажів
    float tax;

    // Виведення підказки для користувача
    std::cout << "Введіть суму продажів: ";
    std::cin >> salesAmount;

    // Обчислення податку на продажі
    tax = salesAmount * 0.7;

    // Виведення результатів з використанням setprecision
    std::cout << " " << std::setprecision(2) << salesAmount;
    std::cout << " " << std::setprecision(2) << tax << "\n";

    // Затримка перед закриттям вікна (для Windows)
    system("pause");

    return 0; // Кінець програми
}

```

Унаслідок того, що у першому операторі **cout** відсутня інструкція переведення рядка, відповідь користувача на підказку (тобто введене значення змінної **prod_sum**) з'явиться відразу праворуч за самою підказкою.


## Контрольні запитання

1.  Як в С++ організовано введення даних?
2.  Як виводяться результати в С++?
3.  Як працює потокове введення даних за допомогою "cin\>\>"? Наведіть приклади.
4.  Як можна описати основні аспекти використання потокового виведення даних "cout<<"?
5.  Що означає термін "форматоване введення-виведення даних" в С++?
6.  Які є правила використання функції scanf в мові програмування С++?
7.  Як функція printf виконує свою роботу в мові програмування С++?

