# 13. Робота з файлами за допомогою засобів STDIO

[Перелік усіх робіт](README.md)

## Мета роботи 

Навчитися створювати та оброблювати файли за допомогою бібліотеки STDIO

## Обладнання

Персональний комп’ютер, Visual Studio 2008 або інша середа розробки для мови C++


## Теоретичні відомості

Для роботи з файловою системою існує заголовочний файл `<stdio.h>`. Покажчик на файл має тип `FILE` та його оголошення виглядає так:

`FILE * myfile;`

З іншого боку, функція `fopen()` відкриває файл за вказаною як перший аргумент адресою в режимі читання ("r"), запису ("w") або додавання ("a") і повертає в програму покажчик на нього. Тому процес відкриття файлу та підключення його до програми виглядає приблизно так: 

`myfile = fopen("hello.txt", "r");`

Основні режими відкриття файлів представлені у таблиці нижче.           

| Назва         | Що робить          |
| ------------- |:------------------:| 
| r   |Відкриває текстовий файл для читання|
| w     |Створює текстовий файл для запису|
| a  |Додає в кінець текстового файлу. Якщо файл не існує, то він буде створений. Всі нові дані, які записуються в нього, будуть додаватися в кінець файлу.|
| r+  |Відкриває  текстовий файл для читання/запису. Вміст залишиться недоторканим. Якщо файлу не існує, то він створений не буде.|
| w+   |Створює текстовий файл для читання /запису. Якщо файл не існує, то він буде створений. Якщо файл вже існує, то відкриття призведе до втрати його вмісту, а в режимі r+ він залишиться недоторканим|
| a+  |Додає в кінець текстового файлу або створює його для читання/запису|

Розрив зв'язку між зовнішнім файлом та вказівником на нього із програми виконується за допомогою функції `fclose()`. Як параметр їй передається покажчик на файл:

`fclose(myfile);`

Часто використовувані функції файлової системи С такі:

| Назва         | Що робить          |
| ------------- |:------------------:| 
| fopen()    |  	Відкриває файл     |
| fclose()     | Закриває файл  |
| putc()  |  	Записує  символ у файл  |
| fputc()  |  	Те саме, що і putc()    |
| getc()  |  	Читає символ з файлу    |
| fgetc() |  	Те саме, що і getc()    |
| fgets()  |  	Читає рядок з файлу     |
| fputs()   |  	Записує  рядок у файл   |
| fseek()  |  	Встановлює  покажчик поточної позиції на певний байт файлу    |
| fprintf()  | Для файлу те саме, що printf() для консолі    |
| fscanf()  | Для файлу те саме, що scanf() для консолі   |
| feof()  | Повертає значення true (істина), якщо досягнуто кінець файлу     |
| remove() |  	Знищуєт файл     |
| rewind()  |  	Встановлює  покажчик поточної позиції на початок файлу    |


### Зчитування з текстового файлу та запис в нього

#### Зчитування з файлу

Функція `fgets` зчитує символи з потоку і зберігає їх у вигляді рядка в параметр `string` до тих пір, поки не настане кінець рядка або поки не буде досягнуто кінець файлу.

`fgets(масив_символів, кількість_зчитуваних_символів, вказівник_на_файл)`

Наприклад: `fgets(str, 50, myfile)`

#### Запис у файл

* Форматоване виведення. Функція `fprintf(файловий_покажчик, рядок_формату, змінні)`
* Порядкове виведення. Функція `fputs(рядок, файловий_покажчик)`
* Посимвольне виведення. Функція `fputc()` або `putc(символ, файловий_покажчик)`.

Далі наведений приклад програми, яка записує відкриває файл  та записує рядок за допомогою функції `fputs()`, зчитує за допомогою функції `fgets()` та закриває його:

```cpp
#include <iostream.h>
#include <stdio.h>

void main()
{
FILE *file;
char load_string[50];

file = fopen("file.txt", "r" ); //відкриття файлу у режимі читання
fgets( load_string, 50 , file ); //зчитування з файлу 50 символів
cout << "load_string = " << load_string << endl;
fclose(file); //закриття файлу     

file = fopen("file.txt", "w" ); //відкриття файлу у режимі запису
if( file != 0 )
    {
    fputs( "string", file ); //запис рядка у файл
    } 
    else
    {
    cout << "File not found !!!" << endl;
    }
    fclose(file); //закриття файлу 
}
```

## Хід роботи

## Контрольні запитання

## Довідники та додаткові матеріали

1. [Working with Files in C++](https://www.geeksforgeeks.org/working-with-files-in-c-c/)
2. [File Input/Output in C++](https://www.geeksforgeeks.org/file-handling-c-classes/) 
3. [C++ File Input/Output](https://www.w3schools.com/cpp/cpp_files.asp)
4. [File Input and Output in C++](https://www.programiz.com/cpp-programming/files-input-output)
5. [C++ File Input/Output Operations](https://www.javatpoint.com/cpp-file-input-output-operations)
6. [Робота з файлами в С++](https://prog-cpp.blogspot.com/2012/05/blog-post.html)
7. [Робота з файлами в C++](https://studassistent.com/cpp-file/)
8. [Робота з файлами в C++ (стандартна бібліотека)](https://smart-programmer.com.ua/c-file/)
9. [Робота з файлами в C++](https://tocode.ru/curses/cpp-files)
10. [Робота з файлами в C++](https://www.ukrprog.com.ua/kursy-c/20-c-files)

